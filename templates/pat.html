{% extends "base.html" %}
{% block title %}{{ config['APP_TITLE'] }}{% endblock %}
{% block head %}
{{ super() }}
{% endblock %}

{% block content %}



<div class="row mb-3">
    <div class="col-md-12">
        <h1 id="s-name"> PAT </h2>
    </div>
</div>
<body>
    <div id="pat">

    </div>
</body>



<script type="text/javascript">


    window.onload = function () {            
        // var allData = '{{ all_data }}';
        var allData = "{{all_data | safe}}";
        console.log("got all data: " + allData);
            //split allData by ", "     
            var entries = allData.split(", ");
            //console.log(entries);
            for (var j = 0; j < entries.length; j++) {
                var entry = entries[j];
                //console.log(entry);
                var entry_split = entry.split(":");
                //console.log(entry_split);
                var key = entry_split[0];
                var value = entry_split[1];
                console.log(key + ": " + value);
                //console.log(key);
                //console.log(value);
            }
            //make a text box for each key:value pair
            //some code below generated by github copilot!
            for (var i = 0; i < entries.length; i++) {
                var entry = entries[i];
                // var entry_split = entry.split(":");                 
                //remove "[, ], {, }, '" from entry
                var entry_clean = entry.replace(/[\[\],{}'"]/g, '');
                // var key = entry_split[0];
                // var value = entry_split[1];
                // console.log(key + ": " + value);
                var textbox = document.createElement("input");
                textbox.type = "text";
                //size texbox to fit space  
                // textbox.style.width = "40%";
                textbox.size = entry_clean.length;
                // textbox.id = key;
                textbox.value = entry_clean;
                document.getElementById("pat").appendChild(textbox);
                //if text longer than screen, make it scrollable
                if (entry_clean.length > 50) {
                    textbox.style.width = "100%";
                    textbox.style.height = "100%";
                    textbox.style.overflow = "auto";
                    //todo: wrap textbox in scrollable div
                }
                

                // if (i % 2 == 1) {
                //     var br = document.createElement("br");
                //     document.getElementById("pat").appendChild(br);
                // }   
                //every 4 textboxes, put into a bounding div
                if (i % 4 == 3) {
                    var div = document.createElement("div");
                    div.style.width = "100%";
                    document.getElementById("pat").appendChild(div);
                }             
            }
    }

</script>
{% endblock %}

{%block javascript%}

{% endblock %}